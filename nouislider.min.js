angular.module("ya.nouislider",[]).value("noUiSliderConfig",{}).directive("noUiSlider",["noUiSliderConfig",function(a){function b(a){return angular.isUndefined(a)?0:angular.isArray(a)&&2==a.length?2:1}return a=a||{},{restrict:"A",require:"ngModel",scope:{noUiSlider:"=",noUiSliderEvents:"=",noUiSliderTooltips:"="},link:function(c,d,e,f){function g(){var b=f.$viewValue,d=angular.extend({},a,c.noUiSlider,{start:b});angular.isDefined(d.start)&&angular.isDefined(d.range)&&(l||(noUiSlider.create(m,d),n=angular.copy(b),angular.forEach(c.noUiSliderEvents,function(a,b){m.noUiSlider.on(b,function(b,c){a(b,c,e)})}),m.noUiSlider.on("slide",function(a,b){h(),f.$setViewValue(a),c.$apply()}),m.noUiSlider.on("change",function(a,b){i()})),l=!0,j())}function h(){var a=document.getElementsByClassName("noUi-origin"),b=[];document.getElementsByClassName("noUi-active").length&&(b=document.getElementsByClassName("noUi-active")[0].parentNode),angular.forEach(a,function(a){a!==b?a.setAttribute("disabled",!0):a.removeAttribute("disabled")})}function i(){var a=document.getElementsByClassName("noUi-origin"),b=document.getElementsByClassName("noUi-active");angular.forEach(a,function(a){a.removeAttribute("disabled")}),angular.forEach(b,function(a){var b=a.className.replace(/(?:^|\s)noUi-active(?!\S)/g,"");console.log(b),a.className=b})}function j(){if(l&&angular.isArray(c.noUiSliderTooltips)){var a=m.getElementsByClassName("tooltip"),b=m.getElementsByClassName("noUi-handle"),d=[];if(a&&0!==a.length)d=a;else for(var e=0;e<b.length;e++)d[e]=document.createElement("div"),b[e].appendChild(d[e]),d[e].className+="tooltip";for(var e=0;e<b.length;e++)angular.isDefined(c.noUiSliderTooltips[e])&&k(d[e],c.noUiSliderTooltips[e])}}function k(a,b){a.innerHTML=b}var l=!1,m=d[0],n=void 0;c.$on("$destroy",function(){l&&(m.noUiSlider.off("update"),m.noUiSlider.off("slide"),m.noUiSlider.off("set"),m.noUiSlider.off("change"))}),f.$render=function(){if(l){var a=f.$viewValue,e=void 0;if(2==b(a)){a[0]=Math.max(a[0],c.noUiSlider.range.min),a[1]=Math.min(a[1],c.noUiSlider.range.max);var g=a[0]==n[0],h=a[1]==n[1];n=angular.copy(a),a[0]>a[1]&&(g&&(a[1]=a[0]),h&&(a[0]=a[1]),a[0]>a[1]&&(a[1]=a[0])),e=[g?null:a[0],h?null:a[1]]}else{var i=angular.isArray(a);i&&(a=a[0]),a=parseFloat(a)||0,a=Math.min(Math.max(a,c.noUiSlider.range.min),c.noUiSlider.range.max),e=i?[a]:a,f.$setViewValue(e)}d.val(e)}},c.$watch(function(){return c.noUiSlider},function(){g()},!0),c.$watch(function(){return c.noUiSliderTooltips},function(){j()},!0),c.$watch(function(){return f.$viewValue},function(){f.$render()},!0),c.$watch(function(){return b(f.$viewValue)},function(a){angular.isDefined(a)&&g()},!0)}}}]);