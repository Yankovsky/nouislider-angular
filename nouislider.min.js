angular.module("ya.nouislider",[]).value("noUiSliderConfig",{}).directive("noUiSlider",["noUiSliderConfig",function(a){function b(a){return angular.isUndefined(a)?0:angular.isArray(a)&&2==a.length?2:1}return a=a||{},{restrict:"A",require:"ngModel",scope:{noUiSlider:"=",noUiSliderEvents:"=",noUiSliderTooltips:"="},link:function(c,d,e,f){function g(){var b=f.$viewValue,d=angular.extend({},a,c.noUiSlider,{start:b});if(angular.isDefined(d.start)&&angular.isDefined(d.range)&&!h){if(noUiSlider.create(i,d),j=angular.copy(b),c.noUiSliderTooltips)for(var g=i.getElementsByClassName("noUi-handle"),k=[],l=0;l<g.length;l++)k[l]=document.createElement("div"),g[l].appendChild(k[l]),k[l].className+="tooltip",k[l].innerHTML=c.noUiSliderTooltips[l];angular.forEach(c.noUiSliderEvents,function(a,b){i.noUiSlider.on(b,function(b,c){a(b,c,e)})}),i.noUiSlider.on("slide",function(a,b){f.$setViewValue(a),c.$apply()}),h=!0}}var h=!1,i=d[0],j=void 0;c.$on("$destroy",function(){i.noUiSlider.off("slide"),i.noUiSlider.off("set"),i.noUiSlider.off("change")}),f.$render=function(){if(h){var a=f.$viewValue,e=void 0;if(2==b(a)){a[0]=Math.max(a[0],c.noUiSlider.range.min),a[1]=Math.min(a[1],c.noUiSlider.range.max);var g=a[0]==j[0],i=a[1]==j[1];j=angular.copy(a),a[0]>a[1]&&(g&&(a[1]=a[0]),i&&(a[0]=a[1]),a[0]>a[1]&&(a[1]=a[0])),e=[g?null:a[0],i?null:a[1]]}else{var k=angular.isArray(a);k&&(a=a[0]),a=parseFloat(a)||0,a=Math.min(Math.max(a,c.noUiSlider.range.min),c.noUiSlider.range.max),e=k?[a]:a,f.$setViewValue(e)}d.val(e)}},c.$watch(function(){return c.noUiSlider},function(){g()},!0),c.$watch(function(){return f.$viewValue},function(){f.$render()},!0),c.$watch(function(){return b(f.$viewValue)},function(a){angular.isDefined(a)&&g()},!0)}}}]);